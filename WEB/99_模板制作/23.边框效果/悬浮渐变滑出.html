<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>悬浮弹出</title>
		<style>
			*{
				margin:0;
				padding:0;
			}
            #all{
                margin-top: 50px;
            }
			#all div{
				width: 100px;
				height:20px;
				background-color: #00aabb;
				/*border:1px solid black;*/
				text-align: center;
				float: left;
			}
			ul{
                margin-top:5px;
				background-color: #CCCCCC;
				list-style-type: none;
                width: 100px;
                overflow: hidden;
                height: 0px;
                /*border:1px solid black;*/
			}
            li{
                /*height: 0px;*/
            }
		</style>
	</head>
	<body>
		<div id="all">
			<div>首页<ul>
				<li>hfkjghar</li>
				<li>;ewjr;we</li>
				<li>jhgjkwhk</li>
				<li>fbkdhfkje</li>
				<li>fgife</li>
			</ul></div>
			<div>产品<ul>
				<li>ndlk</li>
				<li>jfole</li>
				<li>fjkpsef</li>
				<li>dfjs</li>
				<li>sm;dlf</li>
			</ul></div>
			<div>关于<ul>
				<li>dfgsd</li>
				<li>sdfgsdgfsd</li>
				<li>sdfsd</li>
				<li>sdfsdf</li>
				<li>sdfsdf</li>
			</ul></div>



		</div>
		<script src="js/jquery-2.2.3.min.js" type="text/javascript"></script>
	<script type="text/javascript">
	    var divs = document.querySelectorAll("#all div");
		var uls = document.querySelectorAll("ul");

//        var speed = 3;

		//JS原生方法
//		for (var i = 0; i < divs.length; i++){
//
//			divs[i].index = i;
//		    divs[i].onmouseover = function () {
//                addH(divs[this.index]);
//			};
//            divs[i].onmouseout = function () {
//                jianH(divs[this.index]);
//            };
//		}
//
//		function addH(who) {
//            clearInterval(who.timer);
//            who.timer = setInterval(function () {
//                if (uls[who.index].offsetHeight > 100){
//                    clearInterval(who.timer);
//                    uls[who.index].style.height = "100px";
//                }else{
//                    uls[who.index].style.height = uls[who.index].offsetHeight + speed + "px";
//                }
//            },1);
//        }
//
//        function jianH(who) {
//            clearInterval(who.timer);
//            who.timer = setInterval(function () {
//                if (uls[who.index].offsetHeight <= 0){
//                    clearInterval(who.timer);
//                    uls[who.index].style.height = 0;
//                }else{
//                    uls[who.index].style.height = uls[who.index].offsetHeight - speed + "px";
//                }
//            },100);
//        }



        //闭包方法

//		for (var i = 0; i < divs.length; i++){
//			divs[i].timer = null;
//		    divs[i].onmouseover = (function (index) {
//				return function () {
//					clearInterval(divs[index].timer);
//					divs[index].timer = setInterval(function () {
//						if (uls[index].clientHeight >= 100){
//						    clearInterval(divs[index].timer);
//						}else{
//							uls[index].style.height = uls[index].clientHeight + speed + "px";
//						}
//					},1)
//				}
//			})(i);
//			divs[i].onmouseout = (function (index) {
//				return function () {
//					clearInterval(divs[index].timer);
//					divs[index].timer = setInterval(function () {
//						if (uls[index].clientHeight <= 0){
//							clearInterval(divs[index].timer);
//						}else{
//							uls[index].style.height = uls[index].clientHeight - speed + "px";
//						}
//					},1)
//				}
//			})(i);
//		}

		//对象+闭包函数
//		var chageLength = {
//			change: function (speed, index) {
//				return function () {
//					clearInterval(divs[index].timer);
//					divs[index].timer = setInterval(function () {
//						if (uls[index].clientHeight > 100 || uls[index].clientHeight < 0) {
//							clearInterval(divs[index].timer);
//							if (uls[index].clientHeight > 100){
//								uls[index].style.height = 100+"px";
//							}
//						} else {
//							console.log(speed);
//							uls[index].style.height =  uls[index].clientHeight + speed+"px";
//						}
//					}, 1)
//				}
//			}
//		};
//
//		for (var i = 0; i < divs.length; i++){
//			divs[i].timer = null;
//			divs[i].onmouseover = (function (index) {
//				return chageLength.change(1,index);
//			})(i);
//			divs[i].onmouseout = (function (index) {
//				return chageLength.change(-1,index);
//			})(i);
//		}

		$("#all div").on("mouseover",function () {
			$("ul").eq($("#all div").index(this)).animate({
				height:100
			})
			$("ul").unbind("mouseover");
		})
		$("#all div").on("mouseout",function () {
			$("ul").eq($("#all div").index(this)).animate({
				height:0
			})
			$("ul").unbind("mouseout");
		})

	</script>
	</body>
</html>
